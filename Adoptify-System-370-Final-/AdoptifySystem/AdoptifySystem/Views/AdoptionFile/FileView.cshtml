@model AdoptifySystem.Models.AdoptionFileUpload

@{
    ViewBag.Title = "File Upload & Download";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div id="main">
    <div class="" style="text-align:center;padding-left:120px">
        <div class="col-sm-10" style='background-color: #2ba6cb'>
            <h1 style="color:white">Adoption File Upload and Download</h1>
        </div>
    </div>
    @using (Html.BeginForm("FileView", "AdoptionFile", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()
        <div class="row">
            <div class="col-md-10">
                <h2>File Upload</h2>
                <hr />
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                <div class="form-group">
                    <label class="col-md-2 control-label"  title = "Upload Adoption Documents">Upload Adoption Documents</label>
                    <div class="col-md-10">
                        <input type="file" id="files" name="files" class="form-control" required="required" title = "Search for File"><br />
                    </div>
                </div>
                <div class="form-group">
                    @*<div class="col-md-offset-2 col-md-10">*@
                    <input type="submit" value="Upload" class="btn btn-success" title = "Click to Upload File"/>
                    @*</div>*@
                </div>
            </div>
        </div>
    }
    <hr />
    <div class="row">
        <div class="col-md-10">
            <h2>Uploaded File Details</h2>
            <div class="form-group">
                <div>
                    @{
                        var grid = new WebGrid(source: Model.FileList, canPage: true, rowsPerPage: 15);
                        @grid.GetHtml(tableStyle: "table table-striped table-bordered table-hover", headerStyle: "webgrid-header",
                            alternatingRowStyle: "webgrid-alternating-row", selectedRowStyle: "webgrid-selected-row",
                            footerStyle: "webgrid-footer", rowStyle: "webgrid-row-style", mode: WebGridPagerModes.All,
                            firstText: "<< First", previousText: "< Prev", nextText: "Next >", lastText: "Last >>",
                            htmlAttributes: new { id = "DataTable" },
                            columns: grid.Columns(
                                grid.Column("FileName", header: "FILE NAME", canSort: false),
                                grid.Column("FileUrl", header: "FILE PATH", canSort: false),
                                grid.Column(header: "DOWNLOAD", format:
                                                            @<text>
                                                                <a href="~/AdoptionFile/DownloadFile?filePath=@item.FileUrl"><img src="~/Images/download.png" style="width: 15px; height: 15px" title="Download" /></a>
                                                            </text>)
      ));
                    }
                </div>@Html.ActionLink("Done", "Index", "Adoptions", null, new { @class = "btn btn-primary glyphicon glyphicon-circle-arrow-left", @style = "float:right" , @Title = "Click to go to Adoption Page"})
            </div>
        </div>
    </div>

</div>

@section Scripts {
    <script>
        $(function () {
            var successMessage = '@TempData["AlertMessage"]'
            if (successMessage != '')
                alertify.success(successMessage);
        });

    </script>
    @Scripts.Render("~/bundles/jqueryval")
}


